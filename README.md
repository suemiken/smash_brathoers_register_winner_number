# 大乱闘スマッシュブラザーズSpecial対戦記録
大乱闘スマッシュブラザーズSpecialの対戦記録プログラムである。クマメイトへHTTP通信することで、
対戦結果を記録できる。
Switchのアルバム機能からPCへ簡単にデータ転送が可能になったため、作成を考えた。

リザルト画面を撮影し、自分と相手の使用キャラ、自身が勝率や苦手な相手を管理できる。
クマメイトは、一つ一つ登録しなければならないという問題があるが、
このプログラムを使用すれば、リザルトの写真を撮影し、後日まとめてデータ転送するだけで、
対戦の記録と勝率の確認が可能である。

クマメイトの対戦情報を増やしたいと思って作成した。
これを使って、多くの人が対戦を記録し、界隈が盛り上がることを願っている。

# Attention

１．下に示すようなリザルト画面を撮影する必要がある。画面下部にキャラクター名が表示されている状態でないと検知できない。
そのため、この画面状態でAボタンを押すと登録ができない画面に遷移するという問題がある。
２．クマメイトの登録とユーザ名とパスワードをプログラム内で変更する必要がある。
３．組み合わせが膨大であるため、すべてのキャラクター名を認識可能かをテストできなかった。

# feature

tesseractのOCRエンジンを用いてキャラクター名を文字認識している。以下のような手順で行っている。
１.自身の順位、相手の順位、自身のキャラクター名、相手のキャラクター名の箇所のピクセル情報を切り取る。
２.キャラクターのアイコン情報がキャラクター名と被る場合があるため、削除する。(LITTLE MACはボクシンググローブのアイコン)
３.傾き補正を行う。
４.OCRエンジンにて文字認識を行う。

文字認識を使用して自分のファイターと相手のファイターを記録する。以下はオンラインで対戦した際にのリザルト画面の例である。
以下のように自身は1pと記録され、左側に表示され、対戦相手は2pとなり、右側に表示される。キャラ名が表示される箇所は固定であるため、
あるピクセルの範囲を切り取り、文字認識を行うことで、自身、相手の使用キャラを判別する。
自身の勝敗は右上の数字を認識することで判定する。１のとき、勝利、２の時敗北とし、記録を行っている。

自身と相手の順位、キャラクター名を認識したのち、クマメイト登録サイトへアクセスし、
登録を行う。クマメイトの処理速度が遅いため、登録には時間がかかる。

![result_example](https://user-images.githubusercontent.com/18396212/168417513-69198637-a6d6-4b02-9f62-af6f0eb9ac68.jpg)

# Requirement and Installation

OS:windows


python環境:
conda env create -f requirement.yml

tesseractのOCRエンジン：
別途インストールが必要

# Usage

